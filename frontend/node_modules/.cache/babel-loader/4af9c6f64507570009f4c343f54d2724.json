{"ast":null,"code":"import { SIGN_UP, SIGN_IN, LOAD_USER, LOG_OUT, STOP_INITIAL_LOADER, ADD_ALERTS, AUTH_ERROR, CLEAR_ALERTS, CLEAR_POST_STATE, CLEAR_USER_PROFILE } from '../types';\nimport sendRequest, { setAuthToken } from '../utils/axios-setup'; // Load user on Start\n\nconst loadUser = () => async dispatch => {\n  try {\n    let accessToken = localStorage.getItem('ACCESS_TOKEN');\n    if (accessToken) setAuthToken(accessToken);else return dispatch({\n      type: STOP_INITIAL_LOADER\n    });\n    const res = await sendRequest.get('/auth/user');\n    dispatch({\n      type: LOAD_USER,\n      payload: res.data\n    });\n    dispatch({\n      type: ADD_ALERTS,\n      payload: res.data.user.new_account ? {\n        success: true,\n        message: 'Kindly create your developer profile'\n      } : null\n    });\n  } catch (e) {\n    setAuthToken();\n    dispatch({\n      type: AUTH_ERROR\n    });\n    dispatch({\n      type: STOP_INITIAL_LOADER\n    });\n\n    if (e.response && e.response.status === 403) {\n      dispatch({\n        type: ADD_ALERTS,\n        payload: e.response && e.response.data\n      });\n    }\n  }\n}; // Sign in a user (Email and Password)\n\n\nconst signInUser = _ref => {\n  let {\n    email,\n    password\n  } = _ref;\n  return async dispatch => {\n    try {\n      const res = await sendRequest.post('/auth/login', {\n        email,\n        password\n      });\n      setAuthToken(res.data.responses.accessToken);\n      dispatch({\n        type: SIGN_IN,\n        payload: res.data\n      });\n      dispatch({\n        type: ADD_ALERTS,\n        payload: res.data.responses.user.new_account ? [{\n          success: true,\n          message: res.data.message\n        }, {\n          success: true,\n          message: 'Kindly create your developer profile'\n        }] : {\n          success: true,\n          message: res.data.message\n        }\n      });\n      return true;\n    } catch (e) {\n      dispatch({\n        type: ADD_ALERTS,\n        payload: e.response && e.response.data\n      });\n    }\n  };\n}; // Register a user (Email and Password)\n\n\nconst signUpUser = _ref2 => {\n  let {\n    name,\n    email,\n    password\n  } = _ref2;\n  return async dispatch => {\n    try {\n      const res = await sendRequest.post('/auth/register', {\n        name,\n        email,\n        password\n      });\n      setAuthToken(res.data.responses.accessToken);\n      dispatch({\n        type: SIGN_UP,\n        payload: res.data\n      });\n      dispatch({\n        type: ADD_ALERTS,\n        payload: res.data.responses.user.new_account ? [{\n          success: true,\n          message: res.data.message\n        }, {\n          success: true,\n          message: 'Kindly create your developer profile'\n        }] : {\n          success: true,\n          message: res.data.message\n        }\n      });\n      return true;\n    } catch (e) {\n      dispatch({\n        type: ADD_ALERTS,\n        payload: e.response && e.response.data\n      });\n    }\n  };\n}; // logout user\n\n\nconst logOut = () => async dispatch => {\n  setAuthToken();\n  dispatch({\n    type: CLEAR_ALERTS\n  });\n  dispatch({\n    type: LOG_OUT\n  });\n  dispatch({\n    type: CLEAR_USER_PROFILE\n  });\n  dispatch({\n    type: CLEAR_POST_STATE\n  });\n};\n\nexport { signInUser, loadUser, logOut, signUpUser };","map":{"version":3,"names":["SIGN_UP","SIGN_IN","LOAD_USER","LOG_OUT","STOP_INITIAL_LOADER","ADD_ALERTS","AUTH_ERROR","CLEAR_ALERTS","CLEAR_POST_STATE","CLEAR_USER_PROFILE","sendRequest","setAuthToken","loadUser","dispatch","accessToken","localStorage","getItem","type","res","get","payload","data","user","new_account","success","message","e","response","status","signInUser","email","password","post","responses","signUpUser","name","logOut"],"sources":["/Users/saraneuenschwander/Desktop/challenges/Developers-Branch/frontend/src/store/actions/auth.js"],"sourcesContent":["import {\r\n\tSIGN_UP,\r\n\tSIGN_IN,\r\n\tLOAD_USER,\r\n\tLOG_OUT,\r\n\tSTOP_INITIAL_LOADER,\r\n\tADD_ALERTS,\r\n\tAUTH_ERROR,\r\n\tCLEAR_ALERTS,\r\n\tCLEAR_POST_STATE,\r\n\tCLEAR_USER_PROFILE,\r\n} from '../types';\r\nimport sendRequest, { setAuthToken } from '../utils/axios-setup';\r\n\r\n// Load user on Start\r\nconst loadUser = () => async (dispatch) => {\r\n\ttry {\r\n\t\tlet accessToken = localStorage.getItem('ACCESS_TOKEN');\r\n\t\tif (accessToken) setAuthToken(accessToken);\r\n\t\telse return dispatch({ type: STOP_INITIAL_LOADER });\r\n\r\n\t\tconst res = await sendRequest.get('/auth/user');\r\n\t\tdispatch({ type: LOAD_USER, payload: res.data });\r\n\t\tdispatch({\r\n\t\t\ttype: ADD_ALERTS,\r\n\t\t\tpayload: res.data.user.new_account\r\n\t\t\t\t? {\r\n\t\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\t\tmessage: 'Kindly create your developer profile',\r\n\t\t\t\t  }\r\n\t\t\t\t: null,\r\n\t\t});\r\n\t} catch (e) {\r\n\t\tsetAuthToken();\r\n\t\tdispatch({ type: AUTH_ERROR });\r\n\t\tdispatch({ type: STOP_INITIAL_LOADER });\r\n\t\tif (e.response && e.response.status === 403) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: ADD_ALERTS,\r\n\t\t\t\tpayload: e.response && e.response.data,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// Sign in a user (Email and Password)\r\nconst signInUser = ({ email, password }) => async (dispatch) => {\r\n\ttry {\r\n\t\tconst res = await sendRequest.post('/auth/login', {\r\n\t\t\temail,\r\n\t\t\tpassword,\r\n\t\t});\r\n\t\tsetAuthToken(res.data.responses.accessToken);\r\n\t\tdispatch({ type: SIGN_IN, payload: res.data });\r\n\t\tdispatch({\r\n\t\t\ttype: ADD_ALERTS,\r\n\t\t\tpayload: res.data.responses.user.new_account\r\n\t\t\t\t? [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\t\t\tmessage: res.data.message,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\t\t\tmessage: 'Kindly create your developer profile',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  ]\r\n\t\t\t\t: {\r\n\t\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\t\tmessage: res.data.message,\r\n\t\t\t\t  },\r\n\t\t});\r\n\t\treturn true;\r\n\t} catch (e) {\r\n\t\tdispatch({\r\n\t\t\ttype: ADD_ALERTS,\r\n\t\t\tpayload: e.response && e.response.data,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// Register a user (Email and Password)\r\nconst signUpUser = ({ name, email, password }) => async (dispatch) => {\r\n\ttry {\r\n\t\tconst res = await sendRequest.post('/auth/register', {\r\n\t\t\tname,\r\n\t\t\temail,\r\n\t\t\tpassword,\r\n\t\t});\r\n\t\tsetAuthToken(res.data.responses.accessToken);\r\n\t\tdispatch({ type: SIGN_UP, payload: res.data });\r\n\t\tdispatch({\r\n\t\t\ttype: ADD_ALERTS,\r\n\t\t\tpayload: res.data.responses.user.new_account\r\n\t\t\t\t? [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\t\t\tmessage: res.data.message,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\t\t\tmessage: 'Kindly create your developer profile',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  ]\r\n\t\t\t\t: {\r\n\t\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\t\tmessage: res.data.message,\r\n\t\t\t\t  },\r\n\t\t});\r\n\t\treturn true;\r\n\t} catch (e) {\r\n\t\tdispatch({\r\n\t\t\ttype: ADD_ALERTS,\r\n\t\t\tpayload: e.response && e.response.data,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// logout user\r\nconst logOut = () => async (dispatch) => {\r\n\tsetAuthToken();\r\n\tdispatch({ type: CLEAR_ALERTS });\r\n\tdispatch({ type: LOG_OUT });\r\n\tdispatch({ type: CLEAR_USER_PROFILE });\r\n\tdispatch({ type: CLEAR_POST_STATE });\r\n};\r\n\r\nexport { signInUser, loadUser, logOut, signUpUser };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}