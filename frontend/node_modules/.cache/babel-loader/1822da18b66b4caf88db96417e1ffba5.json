{"ast":null,"code":"// Action Types\nimport { FETCH_POSTS, ADD_POST, POST_REACTION, ADD_COMMENT, DELETE_POST, DELETE_COMMENT, GET_SINGLE_POST, SINGLE_POST_LOADER, CLEAR_POST_STATE } from '../types'; // Initial Auth State\n\nconst initialState = {\n  posts: null,\n  loading: null,\n  singlePost: {\n    postDetails: null,\n    loading: null\n  }\n}; // Reducer\n\nconst postReducers = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case FETCH_POSTS:\n      return { ...state,\n        loading: false,\n        posts: !state.posts ? action.payload : [...state.posts, ...action.payload]\n      };\n\n    case ADD_POST:\n      return { ...state,\n        posts: [action.payload, ...state.posts]\n      };\n\n    case POST_REACTION:\n      return { ...state,\n        posts: state.posts ? state.posts.map(it => {\n          if (it.id === action.payload.id) return { ...it,\n            reacting: undefined,\n            reaction: action.payload.reaction === it.reaction ? null : action.payload.reaction\n          };\n          return it;\n        }) : state.posts,\n        singlePost: state.singlePost.postDetails ? { ...state.singlePost,\n          postDetails: { ...state.singlePost.postDetails,\n            post: state.singlePost.postDetails.post.id === action.payload.id ? { ...state.singlePost.postDetails.post,\n              reaction: action.payload.reaction === state.singlePost.postDetails.post.reaction ? null : action.payload.reaction\n            } : state.singlePost.postDetails.post\n          }\n        } : state.singlePost\n      };\n\n    case DELETE_POST:\n      return { ...state,\n        posts: state.posts.filter(it => it.id !== action.payload)\n      };\n\n    case SINGLE_POST_LOADER:\n      return { ...state,\n        singlePost: { ...state.singlePost,\n          loading: action.payload\n        }\n      };\n\n    case GET_SINGLE_POST:\n      return { ...state,\n        singlePost: {\n          postDetails: action.payload,\n          loading: false\n        }\n      };\n\n    case ADD_COMMENT:\n      return { ...state,\n        posts: state.posts ? state.posts.map(it => {\n          if (it.id === action.payload.post_id) return { ...it,\n            comments: it.comments + 1\n          };\n          return it;\n        }) : state.posts,\n        singlePost: { ...state.singlePost,\n          postDetails: { ...state.singlePost.postDetails,\n            comments: [action.payload, ...state.singlePost.postDetails.comments]\n          }\n        }\n      };\n\n    case DELETE_COMMENT:\n      return { ...state,\n        posts: state.posts ? state.posts.map(it => {\n          if (it.id === action.payload.postID) return { ...it,\n            comments: it.comments > 0 ? it.comments - 1 : 0\n          };\n          return it;\n        }) : state.posts,\n        singlePost: { ...state.singlePost,\n          postDetails: { ...state.singlePost.postDetails,\n            comments: state.singlePost.postDetails.comments.filter(it => it.id !== action.payload.commentID)\n          }\n        }\n      };\n\n    case CLEAR_POST_STATE:\n      return initialState;\n\n    default:\n      {\n        return state;\n      }\n  }\n};\n\nexport default postReducers;","map":{"version":3,"names":["FETCH_POSTS","ADD_POST","POST_REACTION","ADD_COMMENT","DELETE_POST","DELETE_COMMENT","GET_SINGLE_POST","SINGLE_POST_LOADER","CLEAR_POST_STATE","initialState","posts","loading","singlePost","postDetails","postReducers","state","action","type","payload","map","it","id","reacting","undefined","reaction","post","filter","post_id","comments","postID","commentID"],"sources":["/Users/saraneuenschwander/Desktop/challenges/Developers-Branch/frontend/src/store/reducers/posts.js"],"sourcesContent":["// Action Types\r\nimport {\r\n\tFETCH_POSTS,\r\n\tADD_POST,\r\n\tPOST_REACTION,\r\n\tADD_COMMENT,\r\n\tDELETE_POST,\r\n\tDELETE_COMMENT,\r\n\tGET_SINGLE_POST,\r\n\tSINGLE_POST_LOADER,\r\n\tCLEAR_POST_STATE,\r\n} from '../types';\r\n\r\n// Initial Auth State\r\nconst initialState = {\r\n\tposts: null,\r\n\tloading: null,\r\n\tsinglePost: { postDetails: null, loading: null },\r\n};\r\n\r\n// Reducer\r\nconst postReducers = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase FETCH_POSTS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tposts: !state.posts ? action.payload : [...state.posts, ...action.payload],\r\n\t\t\t};\r\n\t\tcase ADD_POST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: [action.payload, ...state.posts],\r\n\t\t\t};\r\n\t\tcase POST_REACTION:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: state.posts\r\n\t\t\t\t\t? state.posts.map((it) => {\r\n\t\t\t\t\t\t\tif (it.id === action.payload.id)\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t...it,\r\n\t\t\t\t\t\t\t\t\treacting: undefined,\r\n\t\t\t\t\t\t\t\t\treaction:\r\n\t\t\t\t\t\t\t\t\t\taction.payload.reaction === it.reaction ? null : action.payload.reaction,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn it;\r\n\t\t\t\t\t  })\r\n\t\t\t\t\t: state.posts,\r\n\t\t\t\tsinglePost: state.singlePost.postDetails\r\n\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t...state.singlePost,\r\n\t\t\t\t\t\t\tpostDetails: {\r\n\t\t\t\t\t\t\t\t...state.singlePost.postDetails,\r\n\t\t\t\t\t\t\t\tpost:\r\n\t\t\t\t\t\t\t\t\tstate.singlePost.postDetails.post.id === action.payload.id\r\n\t\t\t\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\t\t\t\t...state.singlePost.postDetails.post,\r\n\t\t\t\t\t\t\t\t\t\t\t\treaction:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taction.payload.reaction === state.singlePost.postDetails.post.reaction\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? null\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: action.payload.reaction,\r\n\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t\t: state.singlePost.postDetails.post,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t: state.singlePost,\r\n\t\t\t};\r\n\t\tcase DELETE_POST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: state.posts.filter((it) => it.id !== action.payload),\r\n\t\t\t};\r\n\t\tcase SINGLE_POST_LOADER:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsinglePost: {\r\n\t\t\t\t\t...state.singlePost,\r\n\t\t\t\t\tloading: action.payload,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\tcase GET_SINGLE_POST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsinglePost: { postDetails: action.payload, loading: false },\r\n\t\t\t};\r\n\t\tcase ADD_COMMENT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: state.posts\r\n\t\t\t\t\t? state.posts.map((it) => {\r\n\t\t\t\t\t\t\tif (it.id === action.payload.post_id) return { ...it, comments: it.comments + 1 };\r\n\t\t\t\t\t\t\treturn it;\r\n\t\t\t\t\t  })\r\n\t\t\t\t\t: state.posts,\r\n\t\t\t\tsinglePost: {\r\n\t\t\t\t\t...state.singlePost,\r\n\t\t\t\t\tpostDetails: {\r\n\t\t\t\t\t\t...state.singlePost.postDetails,\r\n\t\t\t\t\t\tcomments: [action.payload, ...state.singlePost.postDetails.comments],\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\tcase DELETE_COMMENT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: state.posts\r\n\t\t\t\t\t? state.posts.map((it) => {\r\n\t\t\t\t\t\t\tif (it.id === action.payload.postID)\r\n\t\t\t\t\t\t\t\treturn { ...it, comments: it.comments > 0 ? it.comments - 1 : 0 };\r\n\t\t\t\t\t\t\treturn it;\r\n\t\t\t\t\t  })\r\n\t\t\t\t\t: state.posts,\r\n\t\t\t\tsinglePost: {\r\n\t\t\t\t\t...state.singlePost,\r\n\t\t\t\t\tpostDetails: {\r\n\t\t\t\t\t\t...state.singlePost.postDetails,\r\n\t\t\t\t\t\tcomments: state.singlePost.postDetails.comments.filter(\r\n\t\t\t\t\t\t\t(it) => it.id !== action.payload.commentID\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\tcase CLEAR_POST_STATE:\r\n\t\t\treturn initialState;\r\n\t\tdefault: {\r\n\t\t\treturn state;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default postReducers;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}